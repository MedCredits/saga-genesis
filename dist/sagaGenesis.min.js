// https://github.com/MedCredits/saga-genesis#readme v0.1.0 Copyright 2018 undefined
!function(e,t,r,n,a,o,c,s){"use strict";var u="default"in t?t.default:t;function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return(y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&m(a,r.prototype),a}).apply(null,arguments)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?x(e):t}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a,o=o&&o.hasOwnProperty("default")?o.default:o,c=c&&c.hasOwnProperty("default")?c.default:c;var w=function(e){function t(){return i(this,t),b(this,v(t).apply(this,arguments))}return g(t,u.Component),p(t,[{key:"getChildContext",value:function(){return{contractRegistry:this.props.contractRegistry}}},{key:"render",value:function(){return u.Children.only(this.props.children)}}]),t}();l(w,"propTypes",{contractRegistry:r.object.isRequired}),l(w,"childContextTypes",{contractRegistry:r.object});var R=0;var E,C=null;function A(){return!C&&window&&window.web3&&(C=new a(window.web3.currentProvider)),C}function _(){var e,t,r=(E||(E=A()),E||(E=new a),E);return r.utils?(e=r.utils.sha3).call.apply(e,[null].concat(Array.prototype.slice.call(arguments))):(t=r.sha3).call.apply(t,[null].concat(Array.prototype.slice.call(arguments)))}function N(){return _("NotAHex"+Array.from(arguments).join("-"))}var S=function(){function e(t,r){i(this,e),this.address=t,this.method=r;for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];this.args=a,this.hash=N.apply(void 0,[t,r].concat(a))}return p(e,[{key:"toString",value:function(e){return"".concat(this.address,": ").concat(this.method,"(").concat(this.args.map(function(e){return e.toString()}).join(", "),")")}}]),e}();function O(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return y(S,[e,t].concat(n))}var T,L,I=0;function B(){return I+=1}function D(e,t){return{type:"ADD_LOG_LISTENER",address:e,fromBlock:t}}function G(e){return{type:"REMOVE_LOG_LISTENER",address:e}}function j(e){return null!=e}var P=n.connect(function(){return{}},function(e){return{dispatchAddLogListener:function(t,r){e(D(t,r))},dispatchRemoveLogListener:function(t){e(G(t))}}})((L=T=function(e){function r(){return i(this,r),b(this,v(r).apply(this,arguments))}return g(r,t.Component),p(r,[{key:"componentDidMount",value:function(){this.props.address&&j(this.props.fromBlock)&&this.props.dispatchAddLogListener(this.props.address,this.props.fromBlock)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.address&&j(this.props.fromBlock),r=this.props.address!==e.address,n=!1;t&&r&&(this.props.dispatchRemoveLogListener(),n=!0);var a=e.address&&j(e.fromBlock);t&&!n||!a||this.props.dispatchAddLogListener(e.address,e.fromBlock)}},{key:"componentWillUnmount",value:function(){this.props.dispatchRemoveLogListener(this.props.address)}},{key:"render",value:function(){return u.createElement(u.Fragment,null,this.props.children)}}]),r}(),l(T,"propTypes",{address:r.string,fromBlock:r.oneOfType([r.number,r.instanceOf(o)])}),L));function W(e,t){var r=e.sagaGenesis.network.networkId;if(e.sagaGenesis&&e.sagaGenesis.contracts&&e.sagaGenesis.contracts.networks[r]&&e.sagaGenesis.contracts.networks[r].nameAddress)return e.sagaGenesis.contracts.networks[r].nameAddress[t]}function U(e,t){if(t){t=t.toLowerCase();var r=e.sagaGenesis.network.networkId;return e.sagaGenesis&&e.sagaGenesis.contracts&&e.sagaGenesis.contracts.networks[r]?e.sagaGenesis.contracts.networks[r].addressContractKey[t]:void 0}}function K(e,t,r){t&&!t.startsWith("0x")&&(t=W(e,t));for(var n=arguments.length,a=new Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var c=N.apply(null,[t,r].concat(a));return e.sagaGenesis.callCache[c]||{}}var H=function(){function e(t){var r=this;i(this,e),this._lookup={},this._topic0Lookup={},t.forEach(function(e){if(r._lookup[e.name]=e,"event"===e.type){var t=r.topic0(e);r._topic0Lookup[t]=e}})}return p(e,[{key:"lookup",value:function(e){return this._lookup[e]}},{key:"topic0",value:function(e){var t,r=(t="string"==typeof e?this._lookup[e]:e).inputs.map(function(e){return e.type});return _("".concat(t.name,"(").concat(r.join(","),")"))}},{key:"decodeLogParameters",value:function(e){var t=this._topic0Lookup[e.topics[0]];return c.decodeEvent(t,e.data,e.topics)}}]),e}(),F=function(){function e(){i(this,e),this.contractCalls={},this.keyCalls={}}return p(e,[{key:"count",value:function(e){var t=this._getContractCallState(e);return t?t.count:0}},{key:"register",value:function(e,t){this._increment(e),this._getKeyCalls(t).push(e)}},{key:"deregister",value:function(e){var t=this.decrementCalls(this._getKeyCalls(e));return delete this.keyCalls[e],t}},{key:"decrementCalls",value:function(e){var t=this;return e.reduce(function(e,r){return t._decrement(r)||e.push(r),e},[])}},{key:"getContractCalls",value:function(e){if(!e)return{};e=e.toLowerCase();var t=this.contractCalls[e];return t||(t={},this.contractCalls[e]=t),t}},{key:"resetKeyCalls",value:function(e){var t=this._getKeyCalls(e);return this.keyCalls[e]=[],t}},{key:"_getKeyCalls",value:function(e){var t=this.keyCalls[e];return t||(t=[],this.keyCalls[e]=t),t}},{key:"_increment",value:function(e){var t=this._getContractCallState(e);return t?t.count+=1:(t={count:1,call:e},this.getContractCalls(e.address)[e.hash]=t),t.count}},{key:"_decrement",value:function(e){var t=this._getContractCallState(e),r=0;return t&&(t.count-=1,0===t.count?delete this.getContractCalls(e.address)[e.hash]:r=t.count),r}},{key:"_getContractCallState",value:function(e){return this.getContractCalls(e.address)[e.hash]}}]),e}(),M=function(){function e(t){i(this,e),this.config=t,this.contractCache={}}return p(e,[{key:"has",value:function(e){return e=this.cleanAddress(e),!!this.contractCache[e]}},{key:"get",value:function(e,t,r){e=this.cleanAddress(e);var n=this.contractCache[e];if(!n){if(!t)throw new Error("No contract found for address ".concat(e,", you must pass a contractKey for it to be constructed"));n=this.config.contractFactories[t](r,e),this.contractCache[e]=n}return n}},{key:"cleanAddress",value:function(e){return e&&(e=e.toLowerCase()),e}}]),e}();!function(e){var t,r=e.Symbol;"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable"}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")());var q={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Z(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function z(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function J(e,t,r,n){var a=Object.keys(t),o=r&&r.type===q.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===a.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!function(e){if("object"!==(void 0===e?"undefined":V(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))return"The "+o+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+a.join('", "')+'"';var c=Object.keys(e).filter(function(e){return!t.hasOwnProperty(e)&&!n[e]});return c.forEach(function(e){n[e]=!0}),r&&r.type===q.REPLACE?void 0:c.length>0?"Unexpected "+(c.length>1?"keys":"key")+' "'+c.join('", "')+'" found in '+o+'. Expected to find one of the known reducer keys instead: "'+a.join('", "')+'". Unexpected keys will be ignored.':void 0}function X(){}"production"!==process.env.NODE_ENV&&"string"==typeof X.name&&"isCrushed"!==X.name&&Z("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build.");var Y=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"production"!==process.env.NODE_ENV&&void 0===e[a]&&Z('No reducer provided for key "'+a+'"'),"function"==typeof e[a]&&(r[a]=e[a])}var o=Object.keys(r),c=void 0;"production"!==process.env.NODE_ENV&&(c={});var s=void 0;try{!function(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:q.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+q.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(r)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;if("production"!==process.env.NODE_ENV){var n=J(e,r,t,c);n&&Z(n)}for(var a=!1,u={},i=0;i<o.length;i++){var f=o[i],p=r[f],l=e[f],d=p(l,t);if(void 0===d){var h=z(f,t);throw new Error(h)}u[f]=d,a=a||d!==l}return a?u:e}}({callCache:function(e,t){var r=t.type,n=t.call,a=t.response,o=t.error,c=t.calls;switch(void 0===e&&(e={}),r){case"WEB3_STALE_CALLS":e=h({},e),c.forEach(function(t){e[t.hash].stale=!0});break;case"WEB3_CALL":e=h({},e,l({},n.hash,h({},e[n.hash],{inFlight:!0,stale:!1})));break;case"WEB3_CALL_RETURN":e=h({},e,l({},n.hash,h({},e[n.hash],{inFlight:!1,response:a})));break;case"WEB3_CALL_ERROR":e=h({},e,l({},n.hash,h({},e[n.hash],{inFlight:!1,error:o})));break;case"WEB3_CALL_CANCELLED":e=h({},e,l({},n.hash,h({},e[n.hash],{inFlight:!1})))}return e},accounts:function(e,t){var r=t.type,n=t.accounts;switch(void 0===e&&(e=[]),r){case"WEB3_ACCOUNTS":e=n}return e},transactions:function(e,t){var r=t.type,n=t.transactionId,a=t.call,o=t.options,c=t.error,s=t.receipt,u=t.gasUsed,i=t.txHash,f=t.confirmationNumber,p=t.address;switch(void 0===e&&(e={}),r){case"SEND_TRANSACTION":e=h({},e,l({},n,{transactionId:n,call:a,options:o||{},address:p,inFlight:!0}));break;case"TRANSACTION_HASH":e=h({},e,l({},n,h({},e[n],{call:a,inFlight:!1,submitted:!0,txHash:i})));break;case"TRANSACTION_RECEIPT":e=h({},e,l({},n,h({},e[n],{inFlight:!1,complete:!0,receipt:s})));break;case"TRANSACTION_CONFIRMED":e=h({},e,l({},n,h({},e[n],{confirmed:!0,receipt:s})));break;case"TRANSACTION_CONFIRMATION":e=h({},e,l({},n,h({},e[n],{confirmationNumber:f})));break;case"TRANSACTION_ERROR":e=h({},e,l({},n,h({},e[n],{inFlight:!1,complete:!0,error:c,call:a,gasUsed:u})));break;case"SIGNED_OUT":e={};break;case"REMOVE_TRANSACTION":var d=Object.assign({},e);delete d[n],e=d}return e},network:function(e,t){var r=t.type,n=t.networkId;switch(void 0===e&&(e={networkId:void 0}),r){case"WEB3_NETWORK_ID":e={networkId:n}}return e},ethBalance:function(e,t){var r=t.type,n=t.balance;switch(void 0===e&&(e={balance:void 0}),r){case"ETH_BALANCE":e={balance:n}}return e},contracts:function(e,t){var r=t.type,n=t.address,a=t.name,o=t.contractKey,c=t.networkId;switch(void 0===e&&(e={networks:{}}),r){case"ADD_CONTRACT":var s=e.networks[c]||{};s=(e={networks:h({},e.networks,l({},c,h({},s,{addressContractKey:h({},s.addressContractKey,l({},n,o))})))}).networks[c]||{},a&&(e={networks:h({},e.networks,l({},c,h({},s,{nameAddress:h({},s.nameAddress,l({},a,n))})))})}return e},web3:function(e,t){switch(void 0===e&&(e={initialized:!1,error:!1}),t.type){case"WEB3_INITIALIZED":e=h({},e,{initialized:!0});break;case"WEB3_INITIALIZE_ERROR":e=h({},e,{error:!0})}return e},logs:function(e,t){var r=t.type,n=t.address,a=t.logs,o=t.log;switch(void 0===e&&(e={}),r){case"LOG_LISTENER_ADDED":e=e[n]?h({},e,l({},n,h({},e[n],{count:e[n].count+1}))):h({},e,l({},n,{count:1}));break;case"PAST_LOGS":e=h({},e,l({},n,h({},e[n],{logs:a})));break;case"NEW_LOG":(e=h({},e))[n].logs.push(o);break;case"REMOVE_LOG_LISTENER":(e=h({},e))[n]&&(e[n].count-=1,0===e[n].count&&delete e[n])}return e},block:function(e,t){var r=t.type,n=t.block,a=t.blockNumber;switch(void 0===e&&(e={latestBlock:{timestamp:Math.floor(Date.now()/1e3)}}),r){case"UPDATE_BLOCK_NUMBER":(e=h({},e)).blockNumber=a;break;case"BLOCK_LATEST":(e=h({},e)).latestBlock=n}return e}}),Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$=function(e){return"@@redux-saga/"+e},ee=$("TASK"),te=$("HELPER"),re=$("SELF_CANCELLATION"),ne=function(e){return e};function ae(e,t,r){if(!t(e))throw ie("error","uncaught at check",r),new Error(r)}var oe=Object.prototype.hasOwnProperty;var ce={undef:function(e){return null==e},notUndef:function(e){return null!=e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!ce.array(e)&&"object"===(void 0===e?"undefined":Q(e))},promise:function(e){return e&&ce.func(e.then)},iterator:function(e){return e&&ce.func(e.next)&&ce.func(e.throw)},iterable:function(e){return e&&ce.func(Symbol)?ce.func(e[Symbol.iterator]):ce.array(e)},task:function(e){return e&&e[ee]},observable:function(e){return e&&ce.func(e.subscribe)},buffer:function(e){return e&&ce.func(e.isEmpty)&&ce.func(e.take)&&ce.func(e.put)},pattern:function(e){return e&&(ce.string(e)||"symbol"===(void 0===e?"undefined":Q(e))||ce.func(e)||ce.array(e))},channel:function(e){return e&&ce.func(e.take)&&ce.func(e.close)},helper:function(e){return e&&e[te]},stringableFunc:function(e){return ce.func(e)&&(t=e,r="toString",ce.notUndef(t)&&oe.call(t,r));var t,r}},se=function(e){throw e},ue=function(e){return{value:e,done:!0}};function ie(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(r&&r.stack||r)):console[e](t,r)}function fe(e,t){return function(){return"development"===process.env.NODE_ENV&&ie("warn",t),e.apply(void 0,arguments)}}var pe=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},le=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},de=$("IO"),he="TAKE",ge="PUT",ve="ALL",me="CALL",ye="FORK",xe="CANCEL",be="SELECT",ke="ACTION_CHANNEL",we="CANCELLED",Re="GET_CONTEXT",Ee="SET_CONTEXT",Ce="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",Ae=function(e,t){var r;return(r={})[de]=!0,r[e]=t,r},_e=function(e){return ae(He.fork(e),ce.object,"detach(eff): argument must be a fork effect"),e[ye].detached=!0,e};function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&ae(arguments[0],ce.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),ce.pattern(e))return Ae(he,{pattern:e});if(ce.channel(e))return Ae(he,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}function Se(e,t){return arguments.length>1?(ae(e,ce.notUndef,"put(channel, action): argument channel is undefined"),ae(e,ce.channel,"put(channel, action): argument "+e+" is not a valid channel"),ae(t,ce.notUndef,"put(channel, action): argument action is undefined")):(ae(e,ce.notUndef,"put(action): argument action is undefined"),t=e,e=null),Ae(ge,{channel:e,action:t})}function Oe(e){return Ae(ve,e)}function Te(e,t,r){ae(t,ce.notUndef,e+": argument fn is undefined");var n=null;if(ce.array(t)){var a=t;n=a[0],t=a[1]}else if(t.fn){var o=t;n=o.context,t=o.fn}return n&&ce.string(t)&&ce.func(n[t])&&(t=n[t]),ae(t,ce.func,e+": argument "+t+" is not a function"),{context:n,fn:t,args:r}}function Le(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ae(me,Te("call",e,r))}function Ie(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ae(ye,Te("fork",e,r))}function Be(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return _e(Ie.apply(void 0,[e].concat(r)))}function De(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return Oe(t.map(function(e){return De(e)}));var n=t[0];return 1===t.length&&(ae(n,ce.notUndef,"cancel(task): argument task is undefined"),ae(n,ce.task,"cancel(task): argument "+n+" is not a valid Task object "+Ce)),Ae(xe,n||re)}function Ge(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 0===arguments.length?e=ne:(ae(e,ce.notUndef,"select(selector,[...]): argument selector is undefined"),ae(e,ce.func,"select(selector,[...]): argument "+e+" is not a function")),Ae(be,{selector:e,args:r})}function je(e,t){return ae(e,ce.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(ae(t,ce.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),ae(t,ce.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),Ae(ke,{pattern:e,buffer:t})}function Pe(){return Ae(we,{})}function We(e){return ae(e,ce.string,"getContext(prop): argument "+e+" is not a string"),Ae(Re,e)}function Ue(e){return ae(e,ce.object,le(null,e)),Ae(Ee,e)}Ne.maybe=function(){var e=Ne.apply(void 0,arguments);return e[he].maybe=!0,e},Se.resolve=function(){var e=Se.apply(void 0,arguments);return e[ge].resolve=!0,e},Se.sync=fe(Se.resolve,pe("put.sync","put.resolve"));var Ke=function(e){return function(t){return t&&t[de]&&t[e]}},He={take:Ke(he),put:Ke(ge),all:Ke(ve),race:Ke("RACE"),call:Ke(me),cps:Ke("CPS"),fork:Ke(ye),join:Ke("JOIN"),cancel:Ke(xe),select:Ke(be),actionChannel:Ke(ke),cancelled:Ke(we),flush:Ke("FLUSH"),getContext:Ke(Re),setContext:Ke(Ee)},Fe={done:!0,value:void 0},Me={};function qe(e){return ce.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function Ve(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",n=void 0,a=t;function o(t,r){if(a===Me)return Fe;if(r)throw a=Me,r;n&&n(t);var o=e[a](),c=o[0],s=o[1],u=o[2];return n=u,(a=c)===Me?Fe:s}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],a={name:r,next:e,throw:t,return:ue};return n&&(a[te]=!0),"undefined"!=typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}(o,function(e){return o(null,e)},r,!0)}var Ze={type:"@@redux-saga/CHANNEL_END"};function ze(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o={done:!1,value:Ne(e)},c=void 0,s=function(e){return c=e};return Ve({q1:function(){return["q2",o,s]},q2:function(){return c===Ze?[Me]:["q1",(e=c,{done:!1,value:Ie.apply(void 0,[t].concat(n,[e]))})];var e}},"q1","takeEvery("+qe(e)+", "+t.name+")")}function Je(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o={done:!1,value:Ne(e)},c=function(e){return{done:!1,value:Ie.apply(void 0,[t].concat(n,[e]))}},s=void 0,u=void 0,i=function(e){return s=e},f=function(e){return u=e};return Ve({q1:function(){return["q2",o,f]},q2:function(){return u===Ze?[Me]:s?["q3",function(e){return{done:!1,value:De(e)}}(s)]:["q1",c(u),i]},q3:function(){return["q1",c(u),i]}},"q1","takeLatest("+qe(e)+", "+t.name+")")}function Xe(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return Ie.apply(void 0,[ze,e,t].concat(n))}function Ye(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return Ie.apply(void 0,[Je,e,t].concat(n))}process.env.NODE_ENV;var Qe=regeneratorRuntime.mark(tt),$e=regeneratorRuntime.mark(rt),et=regeneratorRuntime.mark(nt);function tt(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,We("web3");case 3:return e=n.sent,n.next=6,Ge(function(e){return e.sagaGenesis.accounts[0]});case 6:return t=n.sent,n.next=9,e.eth.getAccounts();case 9:if((r=n.sent)[0]===t){n.next=13;break}return n.next=13,Se({type:"WEB3_ACCOUNTS",accounts:r});case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,Se({type:"SAGA_GENESIS_CAUGHT_ERROR",error:n.t0});case 19:case"end":return n.stop()}},Qe,this,[[0,15]])}function rt(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Le(tt);case 3:return e.next=5,Le(s.delay,1e3);case 5:e.next=0;break;case 7:case"end":return e.stop()}},$e,this)}function nt(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(rt);case 2:case"end":return e.stop()}},et,this)}var at=regeneratorRuntime.mark(ot);function ot(e){var t,r,n,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.address,r=e.name,n=e.contractKey,a=e.networkId,t=t.toLowerCase(),a){o.next=7;break}return o.next=5,Ge(function(e){return e.sagaGenesis.network.networkId});case 5:(a=o.sent)||console.warn("No network ID available, cannot store ".concat(n,": ").concat(t));case 7:return o.next=9,Ge(U,t);case 9:if(o.sent===n){o.next=13;break}return o.next=13,Se({type:"ADD_CONTRACT",address:t,name:r,contractKey:n,networkId:a});case 13:case"end":return o.stop()}},at,this)}var ct=regeneratorRuntime.mark(st);function st(e,t){var r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,je(e,s.buffers.expanding(50));case 2:r=a.sent;case 3:return a.next=6,Ne(r);case 6:return n=a.sent,a.next=9,Le(t,n);case 9:a.next=3;break;case 11:case"end":return a.stop()}},ct,this)}var ut=regeneratorRuntime.mark(lt),it=regeneratorRuntime.mark(dt),ft=regeneratorRuntime.mark(ht),pt=regeneratorRuntime.mark(gt);function lt(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We("readWeb3");case 2:if(e=t.sent){t.next=7;break}return t.next=6,We("web3");case 6:e=t.sent;case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}},ut,this)}function dt(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.readWeb3,t.next=3,Ue("readWeb3");case 3:case"end":return t.stop()}},it,this)}function ht(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We("web3");case 2:return e=t.sent,t.next=5,e.eth.net.getId();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},ft,this)}function gt(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=A())){t.next=6;break}return t.next=4,Se({type:"WEB3_INITIALIZED",web3:e});case 4:t.next=9;break;case 6:return console.error("window.web3 doesn't exist!"),t.next=9,Se({type:"WEB3_INITIALIZE_ERROR"});case 9:return t.next=11,fork(take,"SET_READ_WEB3",dt);case 11:case"end":return t.stop()}},pt,this)}var vt=regeneratorRuntime.mark(Nt),mt=regeneratorRuntime.mark(St),yt=regeneratorRuntime.mark(Ot),xt=regeneratorRuntime.mark(Tt),bt=regeneratorRuntime.mark(Lt),kt=regeneratorRuntime.mark(It),wt=regeneratorRuntime.mark(Bt),Rt=regeneratorRuntime.mark(Dt),Et=regeneratorRuntime.mark(Gt),Ct=regeneratorRuntime.mark(jt),At=require("debug")("block-sagas"),_t=50;function Nt(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",!1);case 2:return t=t.toLowerCase(),r.next=5,Ge(U,t);case 5:if(!r.sent){r.next=9;break}return e.add(t),r.abrupt("return",!0);case 9:return r.abrupt("return",!1);case 10:case"end":return r.stop()}},vt,this)}function St(e){var t,r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,lt();case 2:t=a.sent,r=0;case 4:if(!(r<_t)){a.next=21;break}return a.next=7,Le(t.eth.getTransactionReceipt,e);case 7:if(!(n=a.sent)){a.next=12;break}return a.abrupt("return",n);case 12:if(!(r>_t)){a.next=16;break}throw new Error("Unable to get receipt from network");case 16:return a.next=18,Le(s.delay,2e3);case 18:r++,a.next=4;break;case 21:case"end":return a.stop()}},mt,this)}function Ot(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.receipt,At("transactionReceipt(): ".concat(t)),r=new Set,n.next=5,Oe(t.logs.map(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(Nt,r,t.address);case 2:if(!t.topics){e.next=5;break}return e.next=5,Oe(t.topics.map(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return n="0x"+t.substr(26),e.next=4,Le(Nt,r,n);case 4:case"end":return e.stop()}},e,this)})));case 5:case"end":return e.stop()}},e,this)})));case 5:return n.next=7,Tt(r);case 7:case"end":return n.stop()}},yt,this)}function Tt(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe(Array.from(e).map(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Se,{type:"CACHE_INVALIDATE_ADDRESS",address:t});case 2:case"end":return e.stop()}},e,this)})));case 2:case"end":return t.stop()}},xt,this)}function Lt(e){var t,r,n,a,o,c,s;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=e.block,At("latestBlock(): ",t),u.prev=2,r=new Set,u.t0=regeneratorRuntime.keys(t.transactions);case 5:if((u.t1=u.t0()).done){u.next=22;break}return n=u.t1.value,a=t.transactions[n],u.next=10,Le(Nt,r,a.to);case 10:return o=u.sent,u.next=13,Le(Nt,r,a.from);case 13:if(c=u.sent,!o&&!c){u.next=20;break}return u.next=17,Le(St,a.hash);case 17:return s=u.sent,u.next=20,Se({type:"BLOCK_TRANSACTION_RECEIPT",receipt:s});case 20:u.next=5;break;case 22:return u.next=24,Le(Tt,r);case 24:u.next=30;break;case 26:return u.prev=26,u.t2=u.catch(2),u.next=30,Se({type:"SAGA_GENESIS_CAUGHT_ERROR",error:u.t2});case 30:case"end":return u.stop()}},bt,this,[[2,26]])}function It(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,lt();case 3:return e=n.sent,n.next=6,Le(e.eth.getBlockNumber);case 6:return t=n.sent,n.next=9,Ge(function(e){return e.sagaGenesis.block.blockNumber});case 9:if(r=n.sent,t===r){n.next=13;break}return n.next=13,Se({type:"UPDATE_BLOCK_NUMBER",blockNumber:t,lastBlockNumber:r});case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),console.warn("Warn in updateCurrentBlockNumber: "+n.t0),bugsnagClient.notify(n.t0);case 19:case"end":return n.stop()}},kt,this,[[0,15]])}function Bt(e){var t,r,n,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.blockNumber,r=e.lastBlockNumber,At("gatherLatestBlocks(".concat(t,", ").concat(r,")")),r){o.next=4;break}return o.abrupt("return");case 4:o.prev=4,n=r+1;case 6:if(!(n<=t)){o.next=15;break}return o.next=9,Le(Dt,n);case 9:return a=o.sent,o.next=12,Se({type:"BLOCK_LATEST",block:a});case 12:n++,o.next=6;break;case 15:o.next=21;break;case 17:return o.prev=17,o.t0=o.catch(4),o.next=21,Se({type:"SAGA_GENESIS_CAUGHT_ERROR",error:o.t0});case 21:case"end":return o.stop()}},wt,this,[[4,17]])}function Dt(e){var t,r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,lt();case 2:t=a.sent,r=0;case 4:if(!(r<_t)){a.next=21;break}return a.next=7,Le(t.eth.getBlock,e,!0);case 7:if(!(n=a.sent)){a.next=12;break}return a.abrupt("return",n);case 12:if(!(r>_t)){a.next=16;break}throw new Error("Unable to get block from network");case 16:return a.next=18,Le(s.delay,2e3);case 18:r++,a.next=4;break;case 21:case"end":return a.stop()}},Rt,this)}function Gt(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,Le(It);case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,Se({type:"SAGA_GENESIS_CAUGHT_ERROR",error:e.t0});case 10:return e.next=12,Le(s.delay,1e3);case 12:e.next=0;break;case 14:case"end":return e.stop()}},Et,this,[[1,6]])}function jt(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(st,"BLOCK_LATEST",Lt);case 2:return e.next=4,Ie(st,"BLOCK_TRANSACTION_RECEIPT",Ot);case 4:return e.next=6,Ie(st,"UPDATE_BLOCK_NUMBER",Bt);case 6:return e.next=8,Ie(Gt);case 8:At("Started.");case 9:case"end":return e.stop()}},Ct,this)}var Pt=regeneratorRuntime.mark(Kt),Wt=regeneratorRuntime.mark(Ht),Ut=regeneratorRuntime.mark(Ft);function Kt(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(isInFlight(e)){t.next=5;break}return callsInFlight.add(e.hash),t.next=5,put({type:"WEB3_CALL",call:e});case 5:return t.next=7,waitForResponse(e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},Pt,this)}function Ht(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,getContext("key");case 2:if(t=r.sent){r.next=5;break}throw new Error("registerCall called without a key scope: ".concat(JSON.stringify(e)));case 5:return r.next=7,getContext("callCountRegistry");case 7:r.sent.register(e,t);case 9:case"end":return r.stop()}},Wt,this)}function Ft(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,getContext("callCountRegistry");case 2:return t=r.sent,r.abrupt("return",t.count(e));case 4:case"end":return r.stop()}},Ut,this)}var Mt=regeneratorRuntime.mark(Xt),qt=regeneratorRuntime.mark(Yt),Vt=regeneratorRuntime.mark(Qt),Zt=regeneratorRuntime.mark($t),zt=regeneratorRuntime.mark(er),Jt=regeneratorRuntime.mark(tr);function Xt(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,We("callCountRegistry");case 2:if(t=n.sent,!(r=t.deregister(e)).length){n.next=7;break}return n.next=7,Se({type:"WEB3_STALE_CALLS",calls:r});case 7:case"end":return n.stop()}},Mt,this)}function Yt(e){var t,r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.address,a.next=3,We("callCountRegistry");case 3:if(r=a.sent,n=Object.values(r.getContractCalls(t))){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,Oe(n.map(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.count>0)){e.next=4;break}return r=t.call,e.next=4,Kt(r);case 4:case"end":return e.stop()}},e,this)})));case 9:case"end":return a.stop()}},qt,this)}function Qt(e){var t,r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.transactionId,t=e.call,r=e.receipt,(n=Object.values(r.events||{}).reduce(function(e,t){return e.add(t.address)},new Set)).add(t.address),a.next=5,Oe(Array.from(n).map(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(U,t);case 2:if(!e.sent){e.next=6;break}return e.next=6,Ie(Se,{type:"CACHE_INVALIDATE_ADDRESS",address:t});case 6:case"end":return e.stop()}},e,this)})));case 5:case"end":return a.stop()}},Vt,this)}function $t(e){var t,r,n,a,o,c;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.saga,r=e.props,n=e.key,s.prev=1,s.next=4,Ue({key:n});case 4:return s.next=6,We("callCountRegistry");case 6:return a=s.sent,o=a.resetKeyCalls(n),s.next=10,Le(t,r);case 10:if(!(c=a.decrementCalls(o)).length){s.next=14;break}return s.next=14,Se({type:"WEB3_STALE_CALLS",calls:c});case 14:s.next=26;break;case 16:return s.prev=16,s.t0=s.catch(1),s.next=20,Pe();case 20:if(s.sent){s.next=24;break}throw s.t0;case 24:return s.next=26,Se({type:"SAGA_CANCELLED",key:n});case 26:case"end":return s.stop()}},Zt,this,[[1,16]])}function er(e){var t,r,n,a,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.saga,r=e.props,n=e.key,a="RUN_SAGA_".concat(n),c.next=4,Ye(a,$t);case 4:return o=c.sent,c.next=7,$t({saga:t,props:r,key:n});case 7:return c.next=9,Ne("END_SAGA_".concat(n));case 9:return c.next=11,Xt(n);case 11:return c.next=13,De(o);case 13:case"end":return c.stop()}},zt,this)}function tr(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe("TRANSACTION_CONFIRMED",Qt);case 2:return e.next=4,Xe("CACHE_INVALIDATE_ADDRESS",Yt);case 4:return e.next=6,Xe("PREPARE_SAGA",er);case 6:case"end":return e.stop()}},Jt,this)}var rr=regeneratorRuntime.mark(mr),nr=regeneratorRuntime.mark(xr),ar=regeneratorRuntime.mark(br),or=regeneratorRuntime.mark(kr),cr=regeneratorRuntime.mark(wr),sr=regeneratorRuntime.mark(Rr),ur=regeneratorRuntime.mark(Er),ir=regeneratorRuntime.mark(Cr),fr=regeneratorRuntime.mark(Ar),pr=regeneratorRuntime.mark(_r),lr=regeneratorRuntime.mark(Nr),dr=regeneratorRuntime.mark(Sr),hr=regeneratorRuntime.mark(Or),gr=require("debug")("call-cache-sagas"),vr=new Set;function mr(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ft(e);case 2:return t=r.sent,r.abrupt("return",t>0);case 4:case"end":return r.stop()}},rr,this)}function yr(e){return vr.has(e.hash)}function xr(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ge(function(t){return t.sagaGenesis.callCache[e.hash]});case 2:return t=r.sent,r.abrupt("return",!t||t.response);case 4:case"end":return r.stop()}},nr,this)}function br(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Ne(["WEB3_CALL_RETURN","WEB3_CALL_ERROR"]);case 3:if((t=r.sent).call.hash!==e.hash){r.next=10;break}r.t0=t.type,r.next="WEB3_CALL_RETURN"===r.t0?8:9;break;case 8:return r.abrupt("return",t.response);case 9:throw t.error;case 10:r.next=0;break;case 12:case"end":return r.stop()}},ar,this)}function kr(e,t){var r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==t){a.next=4;break}return a.next=3,mr(e);case 3:t=a.sent;case 4:if(r=null,n=yr(e),!t||n){a.next=12;break}return a.next=9,xr(e);case 9:r=a.sent,a.next=15;break;case 12:return a.next=14,Kt(e);case 14:r=a.sent;case 15:return a.abrupt("return",r);case 16:case"end":return a.stop()}},or,this)}function wr(e,t){var r,n,a,o=arguments;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(r=o.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=o[a];if(!e.startsWith("0x")){c.next=7;break}return c.next=4,Er.apply(void 0,[e,t].concat(n));case 4:return c.abrupt("return",c.sent);case 7:return c.next=9,Rr.apply(void 0,[e,t].concat(n));case 9:return c.abrupt("return",c.sent);case 10:case"end":return c.stop()}},cr,this)}function Rr(e,t){var r,n,a,o,c=arguments;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Ge(W,e);case 2:if(r=s.sent){s.next=5;break}return s.abrupt("return",null);case 5:for(n=c.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=c[o];return s.next=8,Er.apply(void 0,[r,t].concat(a));case 8:return s.abrupt("return",s.sent);case 9:case"end":return s.stop()}},sr,this)}function Er(e,t){var r,n,a,o,c,s=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:for(r=s.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=s[a];return o=O.apply(void 0,[e,t].concat(n)),u.next=4,mr(o);case 4:return c=u.sent,u.next=7,Ht(o);case 7:return u.next=9,kr(o,c);case 9:return u.abrupt("return",u.sent);case 10:case"end":return u.stop()}},ur,this)}function Cr(e,t){var r,n,a,o,c=arguments;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(r=c.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=c[a];return o=O.apply(void 0,[e,t].concat(n)),s.next=4,Se({type:"WEB3_CALL",call:o});case 4:return s.next=6,br(o);case 6:return s.abrupt("return",s.sent);case 7:case"end":return s.stop()}},ir,this)}function Ar(e,t){var r,n,a,o,c=arguments;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(r=c.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=c[a];return o=O.apply(void 0,[e,t].concat(n)),s.next=4,kr(o);case 4:return s.abrupt("return",s.sent);case 5:case"end":return s.stop()}},fr,this)}function _r(e){var t,r,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,We("readContractRegistry");case 2:return t=a.sent,a.next=5,lt();case 5:return r=a.sent,a.next=8,Ge(U,e);case 8:return n=a.sent,a.abrupt("return",t.get(e,n,r));case 10:case"end":return a.stop()}},pr,this)}function Nr(e){var t,r,n,a,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.address,r=e.method,n=e.args,c.next=3,_r(t);case 3:if(a=c.sent,o=a.methods[r]){c.next=9;break}return c.next=8,Se({type:"WEB3_CALL_ERROR",call:e,error:"Address ".concat(t," does not have method '").concat(r,"'")});case 8:return c.abrupt("return");case 9:return c.abrupt("return",o.apply(void 0,k(n)).call);case 10:case"end":return c.stop()}},lr,this)}function Sr(e){var t,r,n,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.call,gr("web3CallExecute",t),o.prev=2,o.next=5,Ge(function(e){return e.sagaGenesis.accounts[0]});case 5:return r=o.sent,n={from:r},o.next=9,Nr(t);case 9:return a=o.sent,o.next=12,Be(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le(a,n);case 3:return r=e.sent,e.next=6,Se({type:"WEB3_CALL_RETURN",call:t,response:r});case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),gr("web3CallExecute rpc ERROR: ".concat(e.t0)),e.next=13,Se({type:"WEB3_CALL_ERROR",call:t,error:e.t0});case 13:console.error("Error on WEB3 Call: ",t.method,t.args,t,e.t0);case 14:return e.prev=14,vr.delete(t.hash),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[0,8,14,17]])}));case 12:o.next=28;break;case 14:return o.prev=14,o.t0=o.catch(2),gr("web3CallExecute general ERROR: ".concat(o.t0)),o.next=19,Pe();case 19:if(!o.sent){o.next=25;break}return console.warn("Cancelled on WEB3 Call: ",t.method,t.args,t,o.t0),o.next=23,Se({type:"WEB3_CALL_CANCELLED",call:t});case 23:o.next=28;break;case 25:return console.error("Error on WEB3 Call: ",t.method,t.args,t,o.t0),o.next=28,Se({type:"WEB3_CALL_ERROR",call:t,error:o.t0});case 28:case"end":return o.stop()}},dr,this,[[2,14]])}function Or(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe("WEB3_CALL",Sr);case 2:case"end":return e.stop()}},hr,this)}var Tr=regeneratorRuntime.mark(Br),Lr=regeneratorRuntime.mark(Dr),Ir=regeneratorRuntime.mark(Gr);function Br(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,We("web3");case 2:return e=n.sent,n.next=5,Ge(function(e){return e.sagaGenesis.network.networkId});case 5:return t=n.sent,n.prev=6,n.next=9,e.eth.net.getId();case 9:if(r=n.sent,t===r){n.next=13;break}return n.next=13,Se({type:"WEB3_NETWORK_ID",web3:e,networkId:r});case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(6),n.next=19,Se({type:"SAGA_GENESIS_CAUGHT_ERROR",error:n.t0});case 19:case"end":return n.stop()}},Tr,this,[[6,15]])}function Dr(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Le(Br);case 3:return e.next=5,Le(s.delay,1e3);case 5:e.next=0;break;case 7:case"end":return e.stop()}},Lr,this)}function Gr(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Dr);case 2:case"end":return e.stop()}},Ir,this)}var jr=regeneratorRuntime.mark(Ur),Pr=regeneratorRuntime.mark(Kr),Wr=regeneratorRuntime.mark(Hr);function Ur(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,lt();case 2:return e=n.sent,n.next=5,Ge(function(e){return e.sagaGenesis.accounts[0]});case 5:if(t=n.sent,void 0!==e&&void 0!==t){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,Le(e.eth.getBalance,t);case 10:return r=n.sent,n.next=13,Ge(function(e){return e.sagaGenesis.ethBalance.balance});case 13:if(n.sent===r){n.next=17;break}return n.next=17,Se({type:"ETH_BALANCE",balance:r});case 17:case"end":return n.stop()}},jr,this)}function Kr(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,Le(Ur);case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,Se({type:"SAGA_GENESIS_CAUGHT_ERROR",error:e.t0});case 10:return e.next=12,Le(s.delay,2e3);case 12:e.next=0;break;case 14:case"end":return e.stop()}},Pr,this,[[1,6]])}function Hr(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Kr);case 2:case"end":return e.stop()}},Wr,this)}var Fr=regeneratorRuntime.mark(Zr),Mr=regeneratorRuntime.mark(zr),qr=require("debug")("transaction-sagas");function Vr(e,t,r,n,a){return qr("#".concat(r,": createTransactionEventChannel"),t),s.eventChannel(function(e){var o=n(a).on("transactionHash",function(n){qr("#".concat(r,": transactionHash ").concat(n)),e({type:"TRANSACTION_HASH",transactionId:r,txHash:n,call:t})}).on("confirmation",function(n,a){qr("#".concat(r,": confirmation ").concat(n)),e({type:"TRANSACTION_CONFIRMATION",transactionId:r,confirmationNumber:n,receipt:a}),n>2&&(e({type:"TRANSACTION_CONFIRMED",transactionId:r,call:t,confirmationNumber:n,receipt:a}),e(s.END))}).on("receipt",function(t){qr("#".concat(r,": receipt"),t),e({type:"TRANSACTION_RECEIPT",transactionId:r,receipt:t})}).on("error",function(n){qr("#".concat(r,": error ").concat(n));var a={type:"TRANSACTION_ERROR",transactionId:r,call:t,error:n.toString()},o=n.message.match(/"gasUsed": ([0-9]*)/);o&&(a.gasUsed=o[1]),e(a),e(s.END)});return function(){o.removeAllListeners()}})}function Zr(e){var t,r,n,a,o,c,s,u,i,f,p,l,d,h,g;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.transactionId,r=e.call,n=e.options,qr("#".concat(t,": web3Send"),r),a=r.address,o=r.method,c=r.args,v.prev=3,v.next=6,Ge(function(e){return e.sagaGenesis.accounts[0]});case 6:return s=v.sent,n=Object.assign({from:s},n||{}),v.next=10,We("writeContractRegistry");case 10:return u=v.sent,v.next=13,We("web3");case 13:return i=v.sent,v.next=16,Ge(U,a);case 16:if(f=v.sent,p=u.get(a,f,i),l=p.methods[o]){v.next=23;break}return v.next=22,Se({type:"TRANSACTION_ERROR",transactionId:t,call:r,error:"Address ".concat(a," does not have method '").concat(o,"'")});case 22:return v.abrupt("return");case 23:d=l.apply(void 0,k(c)),h=d.send,g=Vr(0,r,t,h,n),v.prev=26;case 27:return v.t0=Se,v.next=31,Ne(g);case 31:return v.t1=v.sent,v.next=34,(0,v.t0)(v.t1);case 34:v.next=27;break;case 36:return v.prev=36,g.close(),v.finish(36);case 39:v.next=46;break;case 41:return v.prev=41,v.t2=v.catch(3),qr("#".concat(t," web3Send: ERROR"),r),v.next=46,Se({type:"TRANSACTION_ERROR",transactionId:t,call:r,error:v.t2.message});case 46:case"end":return v.stop()}},Fr,this,[[3,41],[26,,36,39]])}function zr(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe("SEND_TRANSACTION",Zr);case 2:case"end":return e.stop()}},Mr,this)}var Jr=regeneratorRuntime.mark(Qr),Xr=regeneratorRuntime.mark($r),Yr=regeneratorRuntime.mark(en);function Qr(e){var t,r,n,a,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.address,r=e.fromBlock,t=t.toLowerCase(),c.next=4,Se({type:"LOG_LISTENER_ADDED",address:t});case 4:return c.next=6,Ge(function(e){return e.sagaGenesis.logs[t]});case 6:if(1!==c.sent.count){c.next=17;break}return c.next=10,lt();case 10:return n=c.sent,a=n.utils.toHex(r||0),c.next=14,Le([n.eth,"getPastLogs"],{fromBlock:a,toBlock:"latest",address:t});case 14:return o=c.sent,c.next=17,Se({type:"PAST_LOGS",address:t,logs:o});case 17:case"end":return c.stop()}},Jr,this)}function $r(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.receipt,r.next=3,Oe(t.logs.map(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address.toLowerCase(),e.next=3,Ge(function(e){return e.sagaGenesis.logs[r]});case 3:if(!e.sent){e.next=7;break}return e.next=7,Se({type:"NEW_LOG",address:r,log:t});case 7:case"end":return e.stop()}},e,this)})));case 3:case"end":return r.stop()}},Xr,this)}function en(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(st,"ADD_LOG_LISTENER",Qr);case 2:return e.next=4,Ie(st,"BLOCK_TRANSACTION_RECEIPT",$r);case 4:case"end":return e.stop()}},Yr,this)}var tn=regeneratorRuntime.mark(rn);function rn(e,t){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ne(e);case 2:return r=n.sent,n.next=5,Le(t,r);case 5:case"end":return n.stop()}},tn,this)}var nn=regeneratorRuntime.mark(on),an=regeneratorRuntime.mark(cn);function on(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.web3,r.next=3,Ue({web3:t});case 3:return r.next=5,Oe([Or(),Gr(),nt(),jt(),tr(),zr(),Hr(),en()]);case 5:case"end":return r.stop()}},nn,this)}function cn(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(rn,"WEB3_INITIALIZED",on);case 2:return e.next=4,gt();case 4:case"end":return e.stop()}},an,this)}var sn=function(){function e(){i(this,e)}return p(e,[{key:"handle",value:function(e){var t=this;return{onError:function(r){return!t.hasError&&e&&e.error&&(r(e.error),t.hasError=!0),t.handle(e)},onTxHash:function(r){return!t.hasTxHash&&e&&e.txHash&&(r(e.txHash),t.hasTxHash=!0),t.handle(e)},onReceipt:function(r){return!t.hasReceipt&&e&&e.receipt&&(r(e.receipt),t.hasReceipt=!0),t.handle(e)},onConfirmed:function(r){return!t.hasConfirmed&&e&&e.confirmed&&(r(),t.hasConfirmed=!0),t.handle(e)}}}}]),e}();e.printMsg=function(){console.log("This is a message from the demo package")},e.nextId=B,e.CallCountRegistry=F,e.ContractRegistry=M,e.sagas=cn,e.TransactionStateHandler=sn,e.ContractRegistryProvider=w,e.withContractRegistry=function(e){var n,a;return a=n=function(r){function n(){return i(this,n),b(this,v(n).apply(this,arguments))}return g(n,t.Component),p(n,[{key:"render",value:function(){return u.createElement(e,d({},this.props,{contractRegistry:this.context.contractRegistry}))}}]),n}(),l(n,"contextTypes",{contractRegistry:r.object}),a},e.withSaga=function(e){return function(r){return n.connect(function(){return{}},function(t,r){return{dispatchPrepareSaga:function(r,n){t({type:"PREPARE_SAGA",saga:e,key:n,props:r})},dispatchRunSaga:function(r,n,a){t({type:"RUN_SAGA_".concat(n),saga:e,props:r,key:n,displayName:a})},dispatchEndSaga:function(e){t({type:"END_SAGA_".concat(e),key:e})}}})(function(e){function n(e,t){var a;return i(this,n),l(x(x(a=b(this,v(n).call(this,e,t)))),"displayName","WithSaga(".concat(function(e){return e.displayName||e.name||"Component"}(r),")")),a.sagaKey=++R,a}return g(n,t.PureComponent),p(n,[{key:"componentDidMount",value:function(){this.props.dispatchPrepareSaga(this.props,this.sagaKey)}},{key:"componentWillUnmount",value:function(){this.props.dispatchEndSaga(this.sagaKey)}},{key:"componentDidUpdate",value:function(){this.props.dispatchRunSaga(this.props,this.sagaKey,this.displayName)}},{key:"render",value:function(){return u.createElement(r,d({},this.props,{sagaKey:this.sagaKey}))}}]),n}())}},e.withSend=function(e){return n.connect(function(){return{}},function(e,t){return{dispatchSend:function(t,r,n,a){e({type:"SEND_TRANSACTION",transactionId:t,call:r,address:n,options:a})}}})(function(r){function n(){var e,t;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return l(x(x(t=b(this,(e=v(n)).call.apply(e,[this].concat(a))))),"send",function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return function(n){var o=O.apply(void 0,[e,r].concat(a)),c=B();return t.props.dispatchSend(c,o,e,n),c}}),t}return g(n,t.Component),p(n,[{key:"render",value:function(){return u.createElement(e,d({},this.props,{send:this.send}))}}]),n}())},e.LogListener=P,e.contractByName=W,e.contractKeyByAddress=U,e.cacheCallState=K,e.cacheCallValue=function(e,t,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var c=K.apply(void 0,[e,t,r].concat(a));if(c)return c.response},e.cacheCallValueInt=function(e,t,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var c=K.apply(void 0,[e,t,r].concat(a)).response;return c&&(c=parseInt(c,10)),c},e.cacheCallValueBigNumber=function(e,t,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),c=3;c<n;c++)a[c-3]=arguments[c];var s=K.apply(void 0,[e,t,r].concat(a)).response;if(s)var u=new o(s);return u},e.hashCall=N,e.abiFactory=function(e){return function(t,r){return new t.eth.Contract(e,r)}},e.createCall=O,e.ABIHelper=H,e.addLogListener=D,e.removeLogListener=G,e.logReducerFactory=function(e){return function(t,r){var n=r.type,a=r.logs,o=r.log;switch(void 0===t&&(t={}),n){case"PAST_LOGS":t=h({},t),a.forEach(function(r){e(t,r)});break;case"NEW_LOG":t=h({},t),e(t,o)}return t}},e.reducers=Y,e.start=on,e.web3Send=Zr,e.addContract=ot,e.web3NetworkId=ht,e.takeOnceAndRun=rn,e.takeSequentially=st,e.runCall=kr,e.cacheCall=wr,e.cacheCallByName=Rr,e.cacheCallByAddress=Er,e.callNoCache=Cr,e.web3Call=Ar,e.findWeb3Contract=_r}(this.sagaGenesis=this.sagaGenesis||{},React,PropTypes,reactRedux,Web3,BN,abi,reduxSaga);
